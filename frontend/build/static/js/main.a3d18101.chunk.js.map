{"version":3,"sources":["components/Author.js","components/AuthorPage.js","components/Book.js","components/Auth.js","components/BookForm.js","App.js","reportWebVitals.js","index.js"],"names":["AuthorItem","author","id","to","first_name","last_name","birthday_year","AuthorList","authors","map","AuthorPage","useParams","find","name","BookItem","book","delete_book","onClick","BookList","books","LoginForm","props","state","event","this","setState","target","value","get_token","login","password","preventDefault","onSubmit","handleSubmit","type","placeholder","onChange","handleChange","React","Component","BookForm","selectedOptions","i","length","push","item","console","log","create_book","multiple","className","handleChangeAuthors","NotFound404","location","pathname","App","token","localStorage","getItem","load_data","is_auth","headers","create_header","axios","get","then","response","data","catch","error","restore_token","removeItem","post","setItem","alert","delete","filter","logout","exact","path","component","Author","Book","username","from","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a3d18101.chunk.js","sourcesContent":["import React from 'react'\nimport {Link} from 'react-router-dom';\n\nconst AuthorItem = ({author}) => {\n   return (\n       <tr>\n           <td>\n               {author.id}\n           </td>\n           <td>\n               <Link to={`/author/${author.id}`}>{author.first_name}</Link>\n           </td>\n           <td>\n               <Link to={`/author/${author.id}`}>{author.last_name}</Link>\n           </td>\n           <td>\n               {author.birthday_year}\n           </td>\n       </tr>\n   )\n}\n\nconst AuthorList = ({authors}) => {\n   return (\n       <table>\n           <th>\n               Id\n           </th>\n           <th>\n               First name\n           </th>\n           <th>\n               Last name\n           </th>\n           <th>\n               Birthday year\n           </th>\n           {authors.map((author) => <AuthorItem author={author} />)}\n       </table>\n   )\n}\n\nexport default AuthorList;\n","import React from 'react'\nimport {useParams} from 'react-router-dom';\n\nconst AuthorPage = ({authors}) => {\n\n   let { id } = useParams();\n   let author = authors.find((author) => author.id == id);\n\n   return (\n       <div>\n               {author.name}\n               {author.birthday_year}\n       </div>\n   )\n}\n\nexport default AuthorPage;\n","import React from 'react'\n\nconst BookItem = ({book, delete_book}) => {\n   return (\n       <tr>\n           <td>\n               {book.id}\n           </td>\n           <td>\n               {book.name}\n           </td>\n           <td>\n               {book.authors}\n           </td>\n           <td>\n               <button onClick={()=>delete_book(book.id)}>Delete</button>\n           </td>\n       </tr>\n   )\n}\n\nconst BookList = ({books, delete_book}) => {\n   return (\n       <table>\n           <th>\n               Id\n           </th>\n           <th>\n               Name\n           </th>\n           <th>\n               Authors\n           </th>\n           <th></th>\n           {books.map((book) => <BookItem book={book} delete_book={delete_book} />)}\n       </table>\n   )\n}\n\nexport default BookList;\n","import React from 'react'\n\nclass LoginForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n          'login': '',\n          'password': ''\n        }\n    }\n\n    handleChange(event) {\n        this.setState(\n            {\n                [event.target.name]: event.target.value\n            }\n        );\n    }\n\n    handleSubmit(event) {\n        this.props.get_token(this.state.login, this.state.password);\n        event.preventDefault();\n    }\n\n    render() {\n      return (\n        <form onSubmit={(event)=> this.handleSubmit(event)}>\n            <input type=\"text\" name=\"login\" placeholder=\"login\" value={this.state.login} onChange={(event)=>this.handleChange(event)} />\n            <input type=\"password\" name=\"password\" placeholder=\"password\" value={this.state.password} onChange={(event)=>this.handleChange(event)} />\n            <input type=\"submit\" value=\"Login\" />\n        </form>\n      );\n    }\n}\n\nexport default LoginForm;\n","import React from 'react'\n\n\n\nclass BookForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n          'name': '',\n          'authors': []\n        }\n    }\n\n    handleChange(event) {\n        this.setState(\n            {\n                [event.target.name]: event.target.value\n            }\n        );\n    }\n\n    handleChangeAuthors(event) {\n        if (!event.target.selectedOptions) {\n            return;\n        }\n\n        let authors = [];\n        for (let i = 0; i < event.target.selectedOptions.length; i++){\n            authors.push(event.target.selectedOptions.item(i).value);\n        }\n        console.log(authors);\n\n        this.setState(\n            {\n                'authors': authors\n            }\n        );\n    }\n\n\n    handleSubmit(event) {\n        this.props.create_book(this.state.name, this.state.authors);\n        event.preventDefault();\n    }\n\n    render() {\n      return (\n        <form onSubmit={(event)=> this.handleSubmit(event)}>\n            <input type=\"text\" name=\"name\" placeholder=\"name\" value={this.state.name} onChange={(event)=>this.handleChange(event)} />\n            <select multiple name=\"authors\" className='form-control' onChange={(event)=>this.handleChangeAuthors(event)}>\n                {this.props.authors.map((item)=><option value={item.id}>{item.last_name}</option>)}\n            </select>\n\n            <input type=\"submit\" value=\"Create\" />\n        </form>\n      );\n\n    }\n}\n\n\n\n//\n//    handleChange(event) {\n////        console.log(event.target.selectedOptions);\n////        for (let i = 0; i < event.target.selectedOptions.length; i++){\n////\n////            console.log(event.target.selectedOptions.item(i))\n////        }\n//\n//        console.log(event.target.value)\n//\n//        this.setState(\n//            {\n//                [event.target.name]: event.target.value\n//            }\n//        );\n//    }\n//\n//    handleSubmit(event) {\n//        console.log(this.state);\n//        event.preventDefault();\n//    }\n//\n//    render() {\n//      return (\n//        <form onSubmit={(event)=> this.handleSubmit(event)}>\n//            <input type=\"text\" name=\"name\" placeholder=\"name\" value={this.state.name} onChange={(event)=>this.handleChange(event)} />\n//            <div className=\"form-group\">\n//            <label for=\"authors\">authors</label>\n//\n//            <select name=\"authors\" className='form-control' onChange={(event)=>this.handleChange(event)}>\n//                {this.props.authors.map((item)=><option value={item.id}>{item.last_name}</option>)}\n//            </select>\n//          </div>\n//         <input type=\"submit\" value=\"Create\" />\n//        </form>\n//      );\n//    }\n//}\n//\n\nexport default BookForm;\n","import React from 'react';\nimport './App.css';\nimport AuthorList from './components/Author.js';\nimport AuthorPage from './components/AuthorPage.js';\nimport BookList from './components/Book.js';\nimport LoginForm from './components/Auth.js';\nimport BookForm from './components/BookForm.js';\nimport axios from 'axios';\nimport {HashRouter, Route, Redirect, Switch, Link } from 'react-router-dom';\n\nconst NotFound404 = ({location}) => {\n    return(\n        <div>\n            Not found: {location.pathname}\n        </div>\n    )\n}\n\nclass App extends React.Component {\n    constructor(props) {\n       super(props);\n       this.state = {\n          'authors': [],\n          'books': [],\n          'token': ''\n       }\n    }\n\n    restore_token() {\n       let token = localStorage.getItem('token');\n       this.setState(\n           {\n               'token': token\n           }, this.load_data\n       );\n    }\n\n    create_header() {\n       if (!this.is_auth())\n           return {};\n\n       return {\n            'Authorization': 'Token ' + this.state.token\n       }\n    }\n\n    load_data() {\n       let headers = this.create_header();\n\n       axios\n       .get('http://127.0.0.1:8000/api/authors/', {headers})\n       .then(response => {\n           const authors = response.data\n               this.setState(\n               {\n                   'authors': authors\n               }\n           )\n       })\n       .catch(error => console.log(error))\n\n       axios\n       .get('http://127.0.0.1:8000/api/books/', {headers})\n       .then(response => {\n           const books = response.data\n           this.setState(\n               {\n                   'books': books\n               }\n           )\n       })\n       .catch(error => {\n           this.setState(\n               {\n                   'books': []\n               }\n           )\n           console.log(error)\n        })\n    }\n\n    componentDidMount() {\n        this.restore_token();\n    }\n\n    is_auth() {\n        return !!(this.state.token);\n    }\n\n    logout() {\n        localStorage.removeItem('token')\n        this.setState(\n            {\n               'token': ''\n            }, this.load_data\n        );\n    }\n\n    get_token(login, password) {\n       axios\n       .post(\n            'http://127.0.0.1:8000/api-token-auth/',\n            {\"username\": login, \"password\": password}\n       )\n       .then(response => {\n           localStorage.setItem('token', response.data.token)\n           this.setState(\n               {\n                   'token': response.data.token\n               }, this.load_data\n           );\n       })\n       .catch(error => alert('Wrong password'))\n    }\n\n    delete_book(id) {\n       let headers = this.create_header();\n       axios\n       .delete(`http://127.0.0.1:8000/api/books/${id}/`, {headers})\n       .then(response => {\n           this.setState(\n               {\n                   'books': this.state.books.filter((book) => book.id !== id)\n               }\n           )\n       })\n       .catch(error => {console.log(error)})\n    }\n\n    create_book(name, authors) {\n        console.log(\"create_book \" + name + \" - \" + authors);\n        console.log(authors);\n\n       axios\n       .post(\n            'http://127.0.0.1:8000/api/books/',\n            {\"name\": name, \"authors\": authors}\n       )\n       .then(response => {\n            this.load_data();\n       })\n       .catch(error => console.log('Wrong password'))\n    }\n\n    render() {\n        return (\n            <div>\n                <HashRouter>\n                    <nav>\n                        <ul>\n                            <li>\n                                <Link to='/'>Authors</Link>\n                            </li>\n                            <li>\n                                <Link to='/books'>Books</Link>\n                            </li>\n                            <li>\n                                <Link to='/books/create'>New book</Link>\n                            </li>\n                            <li>{\n                                this.is_auth() ?\n                                    <button onClick={() => this.logout()}>Logout</button> :\n                                    <Link to='/login'>Login</Link>\n                            }\n                            </li>\n                        </ul>\n                    </nav>\n                    <Switch>\n                        <Route exact path='/' component = {() => <AuthorList authors={this.state.authors} />} />\n                        <Route exact path='/books' component = {() => <BookList books={this.state.books} delete_book = {(id) => this.delete_book(id)} />} />\n                        <Route exact path='/login' component = {() => <LoginForm get_token={(username, password) => this.get_token(username, password)}/>} />\n                        <Route exact path='/books/create'\n                            component = {() => <BookForm create_book = {(name, authors) => this.create_book(name, authors)} authors={this.state.authors} />} />\n                        <Route exact path='/author/:id' component = {() => <AuthorPage authors={this.state.authors} />} />\n                        <Redirect from='/authors' to='/' />\n                        <Route component={NotFound404} />\n                    </Switch>\n                </HashRouter>\n            </div>\n        )\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}